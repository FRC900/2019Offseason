<?xml version="1.0"?>
<launch>

  <!-- Camera Model -->
  <arg name="camera_model"      default="zedm" /> <!-- 'zed' or 'zedm' -->
  <arg name="name"              default="zed_goal" />
  <arg name="node_name"         default="zed_node" />
  <!-- Load SVO file -->
  <arg name="svo_file"          default="" /><!-- <arg name="svo_file" default="path/to/svo/file.svo"> -->
  <!-- Remote stream -->
  <arg name="stream"            default="" /> <!-- <arg name="stream" default="<ip_address>:<port>"> -->
  <arg name="camera_id"         default="-1" />
  <arg name="gpu_id"            default="-1" />

  <param name="zed_description" textfile="$(find zed_wrapper)/urdf/$(arg camera_model).urdf" />
  <node name="zed_state_publisher" pkg="robot_state_publisher" type="state_publisher">
  	  <remap from="robot_description" to="zed_description" />
  </node>

  <group ns="$(arg name)">
	  <node name="$(arg node_name)" pkg="zed_wrapper" type="zed_wrapper_node" output="screen" required="true">
		  <rosparam file="$(find controller_node)/config/zed/common.yaml" command="load" />
		  <rosparam file="$(find controller_node)/config/zed/$(arg camera_model).yaml" command="load" />

		  <!-- SVO file path -->
		  <param name="svo_file"          value="$(arg svo_file)" />

		  <!-- Remote stream -->
		  <param name="stream"            value="$(arg stream)" />

		  <!-- Camera ID -->
		  <param name="general/zed_id"    value="$(arg camera_id)" />

		  <!-- GPU ID -->
		  <param name="general/gpu_id"    value="$(arg gpu_id)" />
	  </node>
  </group>

  <!-- Goal detection args -->
  <arg name="down_sample"       default="False" />
  <arg name="sub_rate"          default="1" />
  <arg name="pub_rate"          default="2" />
  <arg name="hFov"              default="105.0" />
  <arg name="camera_angle"      default="-25.0" />
  <arg name="batch"             default="false" /> 

  <node name="goal_detection_node" pkg="goal_detection" type="goal_detection_node" output= "screen">
  	<param name="down_sample" value="$(arg down_sample)" />
  	<param name="sub_rate" value="$(arg sub_rate)" />
	<param name="pub_rate" value="$(arg pub_rate)" />
	<param name="hFov" value="$(arg hFov)" />
	<param name="camera_angle" value="$(arg camera_angle)" />
	<param name="batch" value="$(arg batch)" />
  </node>

  </launch>


